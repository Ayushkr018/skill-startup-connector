<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messages - SkillSync</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        /* Enhanced Chat Variables */
        :root {
            --dashboard-header-height: 70px;
            
            /* Professional Color Palette */
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --warning-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --chat-gradient: linear-gradient(135deg, #667eea 0%, #f093fb 100%);
            
            --dashboard-bg: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --dashboard-card-bg: #ffffff;
            --dashboard-border: #e2e8f0;
            --dashboard-text: #2d3748;
            --dashboard-text-light: #718096;
            
            /* Enhanced Colors */
            --primary-color: #667eea;
            --success-color: #48bb78;
            --warning-color: #ed8936;
            --error-color: #f56565;
            --info-color: #4299e1;
            
            /* Shadows */
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
            --shadow-lg: 0 10px 25px rgba(0,0,0,0.2);
            --shadow-xl: 0 20px 40px rgba(0,0,0,0.25);
        }

        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--dashboard-bg);
            font-family: 'Inter', sans-serif;
            color: var(--dashboard-text);
            min-height: 100vh;
            overflow: hidden;
        }

        /* Dashboard Header */
        .dashboard-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: var(--dashboard-header-height);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--dashboard-border);
            z-index: 1000;
            box-shadow: var(--shadow-md);
        }

        .dashboard-header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 100%;
            padding: 0 2rem;
            gap: 2rem;
        }

        .dashboard-logo a {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
            font-size: 1.4rem;
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border: none;
            border-radius: 8px;
            color: var(--dashboard-text);
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: var(--primary-gradient);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* Chat Container */
        .chat-container {
            display: grid;
            grid-template-columns: 350px 1fr;
            height: calc(100vh - var(--dashboard-header-height));
            margin-top: var(--dashboard-header-height);
        }

        /* Chat Sidebar */
        .chat-sidebar {
            background: var(--dashboard-card-bg);
            border-right: 1px solid var(--dashboard-border);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .sidebar-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--dashboard-border);
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        .sidebar-header h2 {
            font-size: 1.3rem;
            font-weight: 800;
            background: var(--chat-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .search-box {
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 3rem;
            border: 2px solid var(--dashboard-border);
            border-radius: 25px;
            outline: none;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--dashboard-text-light);
            font-size: 1rem;
        }

        .chat-list {
            flex: 1;
            overflow-y: auto;
            padding: 1rem 0;
        }

        .chat-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .chat-item:hover {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        .chat-item.active {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-left-color: var(--primary-color);
        }

        .chat-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--chat-gradient);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            flex-shrink: 0;
            position: relative;
        }

        .online-status {
            position: absolute;
            bottom: 2px;
            right: 2px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--success-color);
            border: 2px solid white;
            animation: pulse 2s infinite;
        }

        .offline-status {
            background: var(--dashboard-text-light);
        }

        .recruiter-avatar {
            background: var(--secondary-gradient);
        }

        .chat-info {
            flex: 1;
            min-width: 0;
        }

        .chat-name {
            font-weight: 700;
            color: var(--dashboard-text);
            margin-bottom: 0.25rem;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .verified-badge {
            color: var(--success-color);
            font-size: 0.8rem;
        }

        .chat-preview {
            color: var(--dashboard-text-light);
            font-size: 0.85rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-weight: 500;
        }

        .typing-preview {
            color: var(--primary-color);
            font-style: italic;
        }

        .chat-meta {
            display: flex;
            flex-direction: column;
            align-items: end;
            gap: 0.25rem;
        }

        .chat-time {
            font-size: 0.75rem;
            color: var(--dashboard-text-light);
            font-weight: 600;
        }

        .unread-badge {
            background: var(--secondary-gradient);
            color: white;
            font-size: 0.7rem;
            padding: 0.2rem 0.5rem;
            border-radius: 10px;
            font-weight: 700;
            min-width: 18px;
            text-align: center;
            animation: pulse 2s infinite;
        }

        /* Chat Main */
        .chat-main {
            display: flex;
            flex-direction: column;
            background: var(--dashboard-card-bg);
            position: relative;
        }

        .chat-main.no-chat {
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        .empty-chat {
            text-align: center;
            padding: 3rem;
        }

        .empty-chat i {
            font-size: 4rem;
            color: var(--dashboard-text-light);
            margin-bottom: 1rem;
            background: var(--chat-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .empty-chat h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dashboard-text);
            margin-bottom: 0.5rem;
        }

        .empty-chat p {
            color: var(--dashboard-text-light);
            font-size: 1rem;
            margin-bottom: 2rem;
        }

        .start-chat-btn {
            padding: 1rem 2rem;
            background: var(--chat-gradient);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .start-chat-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        /* Chat Header */
        .chat-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--dashboard-border);
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .chat-user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .chat-user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--chat-gradient);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            position: relative;
        }

        .chat-user-details h4 {
            font-weight: 700;
            color: var(--dashboard-text);
            margin-bottom: 0.25rem;
        }

        .chat-user-status {
            font-size: 0.8rem;
            color: var(--dashboard-text-light);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success-color);
        }

        .chat-actions {
            display: flex;
            gap: 0.75rem;
        }

        .chat-action-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            color: var(--dashboard-text);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-action-btn:hover {
            background: var(--primary-gradient);
            color: white;
            transform: scale(1.1);
        }

        /* Chat Messages */
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
        }

        .message {
            display: flex;
            align-items: flex-end;
            gap: 1rem;
            max-width: 70%;
            animation: fadeInMessage 0.3s ease;
        }

        @keyframes fadeInMessage {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.sent {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message.received {
            align-self: flex-start;
        }

        .message-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 700;
        }

        .message.sent .message-avatar {
            background: var(--success-gradient);
            color: white;
        }

        .message.received .message-avatar {
            background: var(--chat-gradient);
            color: white;
        }

        .message-content {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .message-bubble {
            padding: 1rem 1.25rem;
            border-radius: 20px;
            font-weight: 500;
            line-height: 1.5;
            position: relative;
            word-wrap: break-word;
        }

        .message.sent .message-bubble {
            background: var(--primary-gradient);
            color: white;
            border-bottom-right-radius: 8px;
        }

        .message.received .message-bubble {
            background: white;
            color: var(--dashboard-text);
            border: 1px solid var(--dashboard-border);
            border-bottom-left-radius: 8px;
        }

        .message-time {
            font-size: 0.7rem;
            color: var(--dashboard-text-light);
            font-weight: 600;
        }

        .message.sent .message-time {
            align-self: flex-end;
        }

        .message.received .message-time {
            align-self: flex-start;
        }

        /* Typing Indicator */
        .typing-indicator {
            display: none;
            align-items: center;
            gap: 1rem;
            max-width: 70%;
            margin-bottom: 1rem;
        }

        .typing-indicator.show {
            display: flex;
            animation: fadeInMessage 0.3s ease;
        }

        .typing-bubble {
            background: white;
            border: 1px solid var(--dashboard-border);
            border-radius: 20px;
            border-bottom-left-radius: 8px;
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .typing-dots {
            display: flex;
            gap: 0.25rem;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--primary-color);
            animation: typingBounce 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingBounce {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1.2); opacity: 1; }
        }

        /* Chat Input */
        .chat-input {
            padding: 1.5rem 2rem;
            border-top: 1px solid var(--dashboard-border);
            background: white;
        }

        .input-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border: 2px solid var(--dashboard-border);
            border-radius: 25px;
            padding: 0.5rem;
            transition: all 0.3s ease;
        }

        .input-container:focus-within {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .message-input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: none;
            outline: none;
            background: transparent;
            font-size: 1rem;
            font-weight: 500;
            resize: none;
            min-height: 20px;
            max-height: 120px;
        }

        .input-actions {
            display: flex;
            gap: 0.5rem;
        }

        .input-action-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .emoji-btn {
            background: #fbbf24;
            color: white;
        }

        .voice-btn {
            background: var(--success-color);
            color: white;
        }

        .attachment-btn {
            background: var(--info-color);
            color: white;
        }

        .send-btn {
            background: var(--primary-gradient);
            color: white;
        }

        .input-action-btn:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-sm);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Mobile Menu Button */
        .mobile-menu-btn {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            border: none;
            background: var(--primary-gradient);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .chat-container {
                grid-template-columns: 300px 1fr;
            }
        }

        @media (max-width: 768px) {
            .dashboard-header-content {
                padding: 0 1rem;
            }

            .chat-container {
                grid-template-columns: 1fr;
                position: relative;
            }

            .chat-sidebar {
                position: fixed;
                left: -100%;
                width: 100%;
                max-width: 350px;
                height: calc(100vh - var(--dashboard-header-height));
                z-index: 1001;
                transition: left 0.3s ease;
                top: var(--dashboard-header-height);
            }

            .chat-sidebar.open {
                left: 0;
            }

            .mobile-sidebar-overlay {
                position: fixed;
                top: var(--dashboard-header-height);
                left: 0;
                width: 100%;
                height: calc(100vh - var(--dashboard-header-height));
                background: rgba(0, 0, 0, 0.5);
                z-index: 1000;
                display: none;
            }

            .mobile-sidebar-overlay.active {
                display: block;
            }

            .chat-header {
                padding-left: 4rem;
            }

            .mobile-menu-btn {
                display: flex;
            }

            .message {
                max-width: 85%;
            }

            .chat-input {
                padding: 1rem;
            }

            .empty-chat .start-chat-btn {
                padding: 1rem 1.5rem;
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .dashboard-header-content {
                padding: 0 0.5rem;
            }

            .chat-sidebar {
                width: 100%;
                max-width: none;
            }

            .empty-chat {
                padding: 2rem 1rem;
            }

            .empty-chat h3 {
                font-size: 1.2rem;
            }

            .empty-chat p {
                font-size: 0.9rem;
            }
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Scrollbar Styling */
        .chat-messages::-webkit-scrollbar,
        .chat-list::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track,
        .chat-list::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .chat-messages::-webkit-scrollbar-thumb,
        .chat-list::-webkit-scrollbar-thumb {
            background: var(--primary-gradient);
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <!-- Dashboard Header -->
    <header class="dashboard-header">
        <div class="dashboard-header-content">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <button onclick="showChatSelection()" class="back-btn">
                    <i class="fas fa-arrow-left"></i>
                    <span>Back to Dashboard</span>
                </button>
                <div class="dashboard-logo">
                    <a href="index.html">
                        <i class="fas fa-network-wired"></i>
                        <span>SkillSync</span>
                    </a>
                </div>
            </div>
            
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--chat-gradient); color: white; display: flex; align-items: center; justify-content: center; font-weight: 700;">A</div>
                <span style="font-weight: 600; color: var(--dashboard-text);">Ayush Kumar</span>
            </div>
        </div>
    </header>

    <!-- Chat Container -->
    <div class="chat-container">
        <!-- Chat Sidebar -->
        <div class="chat-sidebar" id="chatSidebar">
            <div class="sidebar-header">
                <h2>ðŸ’¬ Messages</h2>
                
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" placeholder="Search conversations..." id="searchInput">
                </div>
            </div>

            <div class="chat-list" id="chatList">
                <!-- Recruiter 1 -->
                <div class="chat-item" onclick="openChat('recruiter-1')" data-type="recruiters">
                    <div class="chat-avatar recruiter-avatar">
                        S
                        <div class="online-status"></div>
                    </div>
                    <div class="chat-info">
                        <div class="chat-name">
                            Sarah Chen
                            <i class="fas fa-check-circle verified-badge" title="Verified Recruiter"></i>
                        </div>
                        <div class="chat-preview">Thanks for your interest! I'd love to discuss the Full Stack position...</div>
                    </div>
                    <div class="chat-meta">
                        <div class="chat-time">2:30 PM</div>
                        <div class="unread-badge">2</div>
                    </div>
                </div>

                <!-- Recruiter 2 -->
                <div class="chat-item" onclick="openChat('recruiter-2')" data-type="recruiters">
                    <div class="chat-avatar" style="background: var(--info-color);">
                        M
                        <div class="online-status"></div>
                    </div>
                    <div class="chat-info">
                        <div class="chat-name">
                            Mike Johnson
                            <i class="fas fa-check-circle verified-badge" title="Verified Recruiter"></i>
                        </div>
                        <div class="chat-preview">Your profile looks impressive! Are you available for a quick call?</div>
                    </div>
                    <div class="chat-meta">
                        <div class="chat-time">1:15 PM</div>
                    </div>
                </div>

                <!-- Company Representative -->
                <div class="chat-item" onclick="openChat('company-1')" data-type="recruiters">
                    <div class="chat-avatar" style="background: var(--success-gradient);">
                        TC
                        <div class="offline-status"></div>
                    </div>
                    <div class="chat-info">
                        <div class="chat-name">TechCorp HR</div>
                        <div class="chat-preview">We'd like to schedule an interview for next week...</div>
                    </div>
                    <div class="chat-meta">
                        <div class="chat-time">Yesterday</div>
                    </div>
                </div>

                <!-- Startup Founder -->
                <div class="chat-item" onclick="openChat('startup-1')" data-type="recruiters">
                    <div class="chat-avatar" style="background: var(--warning-gradient);">
                        A
                        <div class="online-status"></div>
                    </div>
                    <div class="chat-info">
                        <div class="chat-name">Alex Rivera - StartupXYZ</div>
                        <div class="chat-preview typing-preview">typing...</div>
                    </div>
                    <div class="chat-meta">
                        <div class="chat-time">11:45 AM</div>
                    </div>
                </div>

                <!-- Marketing Manager -->
                <div class="chat-item" onclick="openChat('marketing-1')" data-type="recruiters">
                    <div class="chat-avatar" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                        D
                        <div class="online-status"></div>
                    </div>
                    <div class="chat-info">
                        <div class="chat-name">Diana Smith - Creative Agency</div>
                        <div class="chat-preview">We have an exciting creative role that matches your portfolio...</div>
                    </div>
                    <div class="chat-meta">
                        <div class="chat-time">Yesterday</div>
                    </div>
                </div>

                <!-- Remote Company -->
                <div class="chat-item" onclick="openChat('remote-1')" data-type="recruiters">
                    <div class="chat-avatar" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);">
                        RC
                        <div class="online-status"></div>
                    </div>
                    <div class="chat-info">
                        <div class="chat-name">RemoteCorp Talent Team</div>
                        <div class="chat-preview">100% remote position available. Interested in learning more?</div>
                    </div>
                    <div class="chat-meta">
                        <div class="chat-time">2 days ago</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Main -->
        <div class="chat-main no-chat" id="chatMain">
            <div class="empty-chat">
                <i class="fas fa-comments"></i>
                <h3>Welcome to SkillSync Messages!</h3>
                <p>Select a conversation to start chatting with recruiters and companies.</p>
                <button class="start-chat-btn" onclick="showChatSelection()">
                    ðŸ’¬ Select Chat
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Sidebar Overlay -->
    <div class="mobile-sidebar-overlay" id="mobileOverlay" onclick="closeMobileSidebar()"></div>

    <!-- Scripts -->
    <script>
        // Global variables
        let currentChat = null;
        let isTyping = false;

        // Initialize chat data (AI Helper removed)
        const chatData = {
            'recruiter-1': {
                name: 'Sarah Chen',
                avatar: 'S',
                status: 'Online â€¢ Recruiter at TechStart Inc.',
                type: 'recruiter',
                messages: [
                    {
                        type: 'received',
                        content: 'Hi Ayush! I came across your profile and I\'m really impressed with your full-stack development experience.',
                        time: '2:25 PM'
                    },
                    {
                        type: 'received',
                        content: 'We have an exciting Full Stack Developer position at TechStart Inc. that I think would be perfect for you. Would you be interested in learning more?',
                        time: '2:30 PM'
                    }
                ]
            },
            'recruiter-2': {
                name: 'Mike Johnson',
                avatar: 'M',
                status: 'Online â€¢ Senior Recruiter at DevCorp',
                type: 'recruiter',
                messages: [
                    {
                        type: 'received',
                        content: 'Hello! Your React and Node.js skills caught my attention. We\'re looking for someone with your exact skill set.',
                        time: '1:10 PM'
                    },
                    {
                        type: 'received',
                        content: 'Are you available for a quick 15-minute call this week to discuss an opportunity?',
                        time: '1:15 PM'
                    }
                ]
            },
            'company-1': {
                name: 'TechCorp HR',
                avatar: 'TC',
                status: 'Offline â€¢ Last seen 2 hours ago',
                type: 'company',
                messages: [
                    {
                        type: 'received',
                        content: 'Thank you for applying to our Senior Developer position. We\'d like to move forward with the interview process.',
                        time: 'Yesterday'
                    },
                    {
                        type: 'received',
                        content: 'Are you available next Tuesday or Wednesday for a technical interview?',
                        time: 'Yesterday'
                    }
                ]
            },
            'startup-1': {
                name: 'Alex Rivera - StartupXYZ',
                avatar: 'A',
                status: 'Online â€¢ Founder',
                type: 'startup',
                messages: [
                    {
                        type: 'received',
                        content: 'Hey! I saw your profile and I love your project portfolio. We\'re a fast-growing startup and could use someone with your skills.',
                        time: '11:40 AM'
                    },
                    {
                        type: 'received',
                        content: 'Interested in being one of our first 10 employees? Equity + competitive salary!',
                        time: '11:45 AM'
                    }
                ]
            },
            'marketing-1': {
                name: 'Diana Smith - Creative Agency',
                avatar: 'D',
                status: 'Online â€¢ Marketing Director',
                type: 'company',
                messages: [
                    {
                        type: 'received',
                        content: 'Hi! We\'re impressed with your creative portfolio. We have a Digital Marketing role that could be perfect for you.',
                        time: 'Yesterday'
                    },
                    {
                        type: 'received',
                        content: 'Would you like to schedule a call to discuss this opportunity further?',
                        time: 'Yesterday'
                    }
                ]
            },
            'remote-1': {
                name: 'RemoteCorp Talent Team',
                avatar: 'RC',
                status: 'Online â€¢ Remote-First Company',
                type: 'company',
                messages: [
                    {
                        type: 'received',
                        content: 'Hello! We\'re a 100% remote company looking for talented developers. Your skills align perfectly with what we need.',
                        time: '2 days ago'
                    },
                    {
                        type: 'received',
                        content: 'We offer flexible hours, competitive pay, and amazing benefits. Interested?',
                        time: '2 days ago'
                    }
                ]
            }
        };

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ðŸ’¬ Messages Page Loaded');
            setupEventListeners();
            
            // Check if mobile and show sidebar by default
            if (window.innerWidth <= 768) {
                showChatSelection();
            }
        });

        // Setup event listeners
        function setupEventListeners() {
            // Search functionality
            document.getElementById('searchInput').addEventListener('input', handleSearch);
        }

        // Show chat selection (mobile-friendly)
        function showChatSelection() {
            if (window.innerWidth <= 768) {
                openMobileSidebar();
            }
        }

        // Handle search
        function handleSearch() {
            const query = this.value.toLowerCase();
            const chatItems = document.querySelectorAll('.chat-item');
            
            chatItems.forEach(item => {
                const name = item.querySelector('.chat-name').textContent.toLowerCase();
                const preview = item.querySelector('.chat-preview').textContent.toLowerCase();
                
                if (name.includes(query) || preview.includes(query)) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Open chat
        function openChat(chatId) {
            currentChat = chatId;
            
            // Update active chat item
            document.querySelectorAll('.chat-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.chat-item').classList.add('active');

            // Load chat interface
            loadChatInterface(chatId);
            
            // Close mobile sidebar if open
            closeMobileSidebar();
        }

        // Load chat interface
        function loadChatInterface(chatId) {
            const chat = chatData[chatId];
            if (!chat) return;

            const chatMain = document.getElementById('chatMain');
            chatMain.className = 'chat-main';
            
            chatMain.innerHTML = `
                <!-- Mobile Menu Button -->
                <button class="mobile-menu-btn" onclick="openMobileSidebar()">
                    <i class="fas fa-bars"></i>
                </button>

                <!-- Chat Header -->
                <div class="chat-header">
                    <div class="chat-user-info">
                        <div class="chat-user-avatar ${chat.type === 'recruiter' ? 'recruiter-avatar' : ''}" style="${chat.type === 'recruiter' ? '' : 'background: var(--' + chat.type + '-gradient);'}">
                            ${chat.avatar}
                            ${chat.status.includes('Online') ? '<div class="online-status"></div>' : ''}
                        </div>
                        <div class="chat-user-details">
                            <h4>${chat.name}</h4>
                            <div class="chat-user-status">
                                ${chat.status.includes('Online') ? '<div class="status-dot"></div>' : ''}
                                ${chat.status}
                            </div>
                        </div>
                    </div>
                    <div class="chat-actions">
                        <button class="chat-action-btn" title="Voice Call">
                            <i class="fas fa-phone"></i>
                        </button>
                        <button class="chat-action-btn" title="Video Call">
                            <i class="fas fa-video"></i>
                        </button>
                        <button class="chat-action-btn" title="More Options">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                    </div>
                </div>

                <!-- Chat Messages -->
                <div class="chat-messages" id="chatMessages">
                    ${renderMessages(chat.messages)}
                    
                    <!-- Typing Indicator -->
                    <div class="typing-indicator" id="typingIndicator">
                        <div class="message-avatar recruiter-avatar">
                            ${chat.avatar}
                        </div>
                        <div class="typing-bubble">
                            <div class="typing-dots">
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                            </div>
                            <span style="margin-left: 0.5rem; font-style: italic; color: var(--dashboard-text-light);">typing...</span>
                        </div>
                    </div>
                </div>

                <!-- Chat Input -->
                <div class="chat-input">
                    <div class="input-container">
                        <button class="input-action-btn emoji-btn" title="Emoji" onclick="toggleEmojiPicker()">
                            ðŸ˜Š
                        </button>
                        <textarea class="message-input" id="messageInput" placeholder="Type your message here..." rows="1"></textarea>
                        <button class="input-action-btn voice-btn" title="Voice Message" onclick="startVoiceRecording()">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <button class="input-action-btn attachment-btn" title="Attach File" onclick="attachFile()">
                            <i class="fas fa-paperclip"></i>
                        </button>
                        <button class="input-action-btn send-btn" id="sendBtn" onclick="sendMessage()" title="Send Message">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            `;

            // Scroll to bottom
            setTimeout(() => {
                const messagesContainer = document.getElementById('chatMessages');
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 100);

            // Setup input listeners for this chat
            setupChatInputListeners();
        }

        // Render messages
        function renderMessages(messages) {
            return messages.map(message => `
                <div class="message ${message.type}">
                    <div class="message-avatar ${message.type === 'received' ? 'recruiter-avatar' : ''}">
                        ${message.type === 'received' ? 
                            (chatData[currentChat]?.avatar || 'U') : 
                            'A'
                        }
                    </div>
                    <div class="message-content">
                        <div class="message-bubble">
                            ${message.content}
                        </div>
                        <div class="message-time">${message.time}</div>
                    </div>
                </div>
            `).join('');
        }

        // Setup chat input listeners
        function setupChatInputListeners() {
            const messageInput = document.getElementById('messageInput');
            if (messageInput) {
                messageInput.addEventListener('keypress', handleKeyPress);
                messageInput.addEventListener('input', function() {
                    // Auto-resize textarea
                    this.style.height = 'auto';
                    this.style.height = Math.min(this.scrollHeight, 120) + 'px';
                    
                    // Update send button state
                    const sendBtn = document.getElementById('sendBtn');
                    if (this.value.trim()) {
                        sendBtn.disabled = false;
                        sendBtn.style.opacity = '1';
                    } else {
                        sendBtn.disabled = true;
                        sendBtn.style.opacity = '0.5';
                    }
                });
            }
        }

        // Handle key press
        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        // Send message
        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();
            
            if (!message || !currentChat) return;

            // Add user message
            addMessage('sent', message);
            messageInput.value = '';
            messageInput.style.height = 'auto';
            
            // Reset send button
            const sendBtn = document.getElementById('sendBtn');
            sendBtn.disabled = true;
            sendBtn.style.opacity = '0.5';

            // Simulate recruiter response
            setTimeout(() => {
                generateRecruiterResponse(message);
            }, 2000 + Math.random() * 2000);
        }

        // Add message to chat
        function addMessage(type, content) {
            const messagesContainer = document.getElementById('chatMessages');
            const currentTime = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            messageDiv.innerHTML = `
                <div class="message-avatar ${type === 'received' ? 'recruiter-avatar' : ''}">
                    ${type === 'received' ? 
                        (chatData[currentChat]?.avatar || 'U') : 
                        'A'
                    }
                </div>
                <div class="message-content">
                    <div class="message-bubble">${content}</div>
                    <div class="message-time">${currentTime}</div>
                </div>
            `;

            // Hide typing indicator
            hideTypingIndicator();
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;

            // Store message in chat data
            if (!chatData[currentChat].messages) chatData[currentChat].messages = [];
            chatData[currentChat].messages.push({
                type: type,
                content: content,
                time: currentTime
            });
        }

        // Show typing indicator
        function showTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.classList.add('show');
                const messagesContainer = document.getElementById('chatMessages');
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
        }

        // Hide typing indicator
        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.classList.remove('show');
            }
        }

        // Generate recruiter response
        function generateRecruiterResponse(userMessage) {
            const recruiterResponses = [
                "That sounds great! I'd love to discuss this opportunity further with you.",
                "Thanks for getting back to me! When would be a good time for a quick call?",
                "Perfect! I'll send you more details about the role and the team.",
                "I appreciate your interest! Let me check with the hiring manager and get back to you.",
                "Excellent! Based on what you've told me, I think you'd be a great fit for this position.",
                "That's exactly what we're looking for! I'll schedule you for the next round of interviews.",
                "Great to hear from you! Let me share more details about this exciting opportunity.",
                "Your background seems perfect for this role. Can we schedule a brief call this week?",
                "I'm excited about your interest! This position offers great growth opportunities.",
                "Thanks for your response! I'll connect you with our hiring manager soon."
            ];
            
            const response = recruiterResponses[Math.floor(Math.random() * recruiterResponses.length)];
            showTypingIndicator();
            
            setTimeout(() => {
                addMessage('received', response);
            }, 1500);
        }

        // Input action functions
        function toggleEmojiPicker() {
            alert('Emoji picker functionality will be implemented here!');
        }

        function startVoiceRecording() {
            alert('Voice recording functionality will be implemented here!');
        }

        function attachFile() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*,video/*,audio/*,.pdf,.doc,.docx';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    alert(`File selected: ${file.name}\nFile upload functionality will be implemented here!`);
                }
            };
            input.click();
        }

        // Mobile sidebar functions
        function openMobileSidebar() {
            document.getElementById('chatSidebar').classList.add('open');
            document.getElementById('mobileOverlay').classList.add('active');
        }

        function closeMobileSidebar() {
            document.getElementById('chatSidebar').classList.remove('open');
            document.getElementById('mobileOverlay').classList.remove('active');
        }

        // Handle window resize
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                closeMobileSidebar();
            }
        });
    </script>
</body>
</html>
 
