<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messages - SkillSync AI</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        /* Enhanced Chat Variables */
        :root {
            --dashboard-header-height: 70px;
            
            /* Professional Color Palette */
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --warning-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --chat-gradient: linear-gradient(135deg, #667eea 0%, #f093fb 100%);
            --recruiter-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --company-gradient: linear-gradient(135deg, #48bb78 0%, #2dd4bf 100%);
            --startup-gradient: linear-gradient(135deg, #f59e0b 0%, #eab308 100%);
            --danger-gradient: linear-gradient(135deg, #ef4444 0%, #f97316 100%);
            
            --dashboard-bg: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%);
            --dashboard-card-bg: rgba(255, 255, 255, 0.95);
            --dashboard-border: rgba(148, 163, 184, 0.2);
            --dashboard-text: #1e293b;
            --dashboard-text-light: #64748b;
            --dashboard-text-muted: #94a3b8;
            
            /* Enhanced Colors */
            --primary-color: #667eea;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --info-color: #3b82f6;
            --online-color: #10b981;
            
            /* Modern Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--dashboard-bg);
            font-family: 'Inter', sans-serif;
            color: var(--dashboard-text);
            min-height: 100vh;
            overflow: hidden;
            line-height: 1.6;
        }

        /* Dashboard Header */
        .dashboard-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: var(--dashboard-header-height);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--dashboard-border);
            z-index: 1000;
            box-shadow: var(--shadow-md);
        }

        .dashboard-header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 100%;
            padding: 0 2rem;
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .dashboard-logo a {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
            font-size: 1.4rem;
            font-family: 'Space Grotesk', sans-serif;
            transition: all 0.3s ease;
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1.2rem;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid var(--dashboard-border);
            border-radius: 12px;
            color: var(--dashboard-text);
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .back-btn:hover {
            background: var(--primary-gradient);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar-header {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--chat-gradient);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .user-name {
            font-weight: 600;
            color: var(--dashboard-text);
            font-size: 0.95rem;
        }

        /* Chat Container */
        .chat-container {
            display: grid;
            grid-template-columns: 380px 1fr;
            height: calc(100vh - var(--dashboard-header-height));
            margin-top: var(--dashboard-header-height);
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Chat Sidebar */
        .chat-sidebar {
            background: var(--dashboard-card-bg);
            backdrop-filter: blur(12px);
            border-right: 1px solid var(--dashboard-border);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .sidebar-header {
            padding: 2rem;
            border-bottom: 1px solid var(--dashboard-border);
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }

        .sidebar-header h2 {
            font-size: 1.5rem;
            font-weight: 800;
            background: var(--chat-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.5rem;
            font-family: 'Space Grotesk', sans-serif;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .search-box {
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 0.875rem 1rem 0.875rem 3.5rem;
            border: 2px solid var(--dashboard-border);
            border-radius: 16px;
            outline: none;
            font-size: 0.95rem;
            font-weight: 500;
            transition: all 0.3s ease;
            background: white;
        }

        .search-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: scale(1.02);
        }

        .search-icon {
            position: absolute;
            left: 1.25rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--dashboard-text-light);
            font-size: 1.1rem;
        }

        .filter-tabs {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .filter-tab {
            padding: 0.5rem 1rem;
            background: transparent;
            border: 2px solid var(--dashboard-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--dashboard-text);
            flex: 1;
            text-align: center;
        }

        .filter-tab.active {
            background: var(--primary-gradient);
            color: white;
            border-color: var(--primary-color);
        }

        .filter-tab:hover:not(.active) {
            border-color: var(--primary-color);
            background: rgba(102, 126, 234, 0.1);
        }

        .chat-list {
            flex: 1;
            overflow-y: auto;
            padding: 1rem 0;
        }

        .chat-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.25rem 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            position: relative;
        }

        .chat-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 0;
            background: var(--primary-gradient);
            transition: width 0.3s ease;
        }

        .chat-item:hover::before {
            width: 4px;
        }

        .chat-item:hover {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            transform: translateX(4px);
        }

        .chat-item.active {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-left-color: var(--primary-color);
        }

        .chat-item.active::before {
            width: 4px;
        }

        .chat-item.muted {
            opacity: 0.6;
        }

        .chat-avatar {
            width: 55px;
            height: 55px;
            border-radius: 16px;
            background: var(--chat-gradient);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
            flex-shrink: 0;
            position: relative;
            font-family: 'Space Grotesk', sans-serif;
            box-shadow: var(--shadow-md);
        }

        .online-status, .offline-status, .away-status {
            position: absolute;
            bottom: 2px;
            right: 2px;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: var(--shadow-sm);
        }

        .online-status {
            background: var(--online-color);
            animation: onlinePulse 2s infinite;
        }

        .offline-status {
            background: var(--dashboard-text-muted);
        }

        .away-status {
            background: var(--warning-color);
        }

        @keyframes onlinePulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .recruiter-avatar {
            background: var(--recruiter-gradient);
        }

        .company-avatar {
            background: var(--company-gradient);
        }

        .startup-avatar {
            background: var(--startup-gradient);
        }

        .chat-info {
            flex: 1;
            min-width: 0;
        }

        .chat-name {
            font-weight: 700;
            color: var(--dashboard-text);
            margin-bottom: 0.3rem;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'Space Grotesk', sans-serif;
        }

        .verified-badge {
            color: var(--success-color);
            font-size: 0.85rem;
        }

        .muted-indicator {
            color: var(--dashboard-text-muted);
            font-size: 0.75rem;
        }

        .chat-preview {
            color: var(--dashboard-text-light);
            font-size: 0.9rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-weight: 500;
            line-height: 1.4;
        }

        .typing-preview {
            color: var(--primary-color);
            font-style: italic;
            animation: typingPreview 1.5s infinite;
        }

        @keyframes typingPreview {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .chat-meta {
            display: flex;
            flex-direction: column;
            align-items: end;
            gap: 0.4rem;
        }

        .chat-time {
            font-size: 0.75rem;
            color: var(--dashboard-text-muted);
            font-weight: 600;
        }

        .unread-badge {
            background: var(--secondary-gradient);
            color: white;
            font-size: 0.7rem;
            padding: 0.3rem 0.6rem;
            border-radius: 12px;
            font-weight: 700;
            min-width: 20px;
            text-align: center;
            animation: unreadPulse 2s infinite;
        }

        @keyframes unreadPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .priority-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--error-color);
        }

        /* Chat Main */
        .chat-main {
            display: flex;
            flex-direction: column;
            background: var(--dashboard-card-bg);
            backdrop-filter: blur(12px);
            position: relative;
        }

        .chat-main.no-chat {
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }

        .empty-chat {
            text-align: center;
            padding: 4rem 2rem;
        }

        .empty-chat-icon {
            font-size: 5rem;
            background: var(--chat-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 2rem;
        }

        .empty-chat h3 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dashboard-text);
            margin-bottom: 1rem;
            font-family: 'Space Grotesk', sans-serif;
        }

        .empty-chat p {
            color: var(--dashboard-text-light);
            font-size: 1.1rem;
            margin-bottom: 2rem;
            max-width: 400px;
            line-height: 1.6;
        }

        .start-chat-btn {
            padding: 1.2rem 2.5rem;
            background: var(--chat-gradient);
            color: white;
            border: none;
            border-radius: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .start-chat-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-xl);
        }

        /* Chat Header */
        .chat-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--dashboard-border);
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .chat-user-info {
            display: flex;
            align-items: center;
            gap: 1.2rem;
        }

        .chat-user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 16px;
            background: var(--chat-gradient);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            position: relative;
            font-family: 'Space Grotesk', sans-serif;
            box-shadow: var(--shadow-md);
        }

        .chat-user-details h4 {
            font-weight: 700;
            color: var(--dashboard-text);
            margin-bottom: 0.3rem;
            font-size: 1.1rem;
            font-family: 'Space Grotesk', sans-serif;
        }

        .chat-user-status {
            font-size: 0.85rem;
            color: var(--dashboard-text-light);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success-color);
        }

        .chat-actions {
            display: flex;
            gap: 0.75rem;
        }

        .chat-action-btn {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            border: none;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid var(--dashboard-border);
            color: var(--dashboard-text);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            position: relative;
        }

        .chat-action-btn:hover {
            background: var(--primary-gradient);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* Chat Messages */
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
        }

        .message {
            display: flex;
            align-items: flex-end;
            gap: 1rem;
            max-width: 75%;
            animation: messageSlideIn 0.4s ease;
        }

        @keyframes messageSlideIn {
            from { 
                opacity: 0; 
                transform: translateY(15px) scale(0.95);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }

        .message.sent {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message.received {
            align-self: flex-start;
        }

        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 12px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 700;
            font-family: 'Space Grotesk', sans-serif;
            box-shadow: var(--shadow-sm);
        }

        .message.sent .message-avatar {
            background: var(--success-gradient);
            color: white;
        }

        .message.received .message-avatar {
            background: var(--chat-gradient);
            color: white;
        }

        .message-content {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }

        .message-bubble {
            padding: 1.2rem 1.5rem;
            border-radius: 20px;
            font-weight: 500;
            line-height: 1.6;
            position: relative;
            word-wrap: break-word;
            font-size: 0.95rem;
        }

        .message.sent .message-bubble {
            background: var(--primary-gradient);
            color: white;
            border-bottom-right-radius: 8px;
        }

        .message.received .message-bubble {
            background: white;
            color: var(--dashboard-text);
            border: 1px solid var(--dashboard-border);
            border-bottom-left-radius: 8px;
            box-shadow: var(--shadow-sm);
        }

        .message-time {
            font-size: 0.7rem;
            color: var(--dashboard-text-muted);
            font-weight: 600;
        }

        .message.sent .message-time {
            align-self: flex-end;
        }

        .message.received .message-time {
            align-self: flex-start;
        }

        .message-status {
            font-size: 0.7rem;
            color: var(--dashboard-text-muted);
            display: flex;
            align-items: center;
            gap: 0.3rem;
            align-self: flex-end;
        }

        .message-status.read {
            color: var(--success-color);
        }

        /* Typing Indicator */
        .typing-indicator {
            display: none;
            align-items: center;
            gap: 1rem;
            max-width: 70%;
            margin-bottom: 1rem;
            animation: messageSlideIn 0.4s ease;
        }

        .typing-indicator.show {
            display: flex;
        }

        .typing-bubble {
            background: white;
            border: 1px solid var(--dashboard-border);
            border-radius: 20px;
            border-bottom-left-radius: 8px;
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            box-shadow: var(--shadow-sm);
        }

        .typing-dots {
            display: flex;
            gap: 0.3rem;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--primary-color);
            animation: typingBounce 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingBounce {
            0%, 80%, 100% { 
                transform: scale(0.8); 
                opacity: 0.5; 
            }
            40% { 
                transform: scale(1.2); 
                opacity: 1; 
            }
        }

        /* Chat Input */
        .chat-input {
            padding: 1.5rem 2rem;
            border-top: 1px solid var(--dashboard-border);
            background: white;
            backdrop-filter: blur(12px);
        }

        .input-container {
            display: flex;
            align-items: flex-end;
            gap: 1rem;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border: 2px solid var(--dashboard-border);
            border-radius: 20px;
            padding: 0.75rem;
            transition: all 0.3s ease;
        }

        .input-container:focus-within {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: scale(1.02);
        }

        .message-input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: none;
            outline: none;
            background: transparent;
            font-size: 1rem;
            font-weight: 500;
            resize: none;
            min-height: 24px;
            max-height: 120px;
            font-family: 'Inter', sans-serif;
        }

        .input-actions {
            display: flex;
            gap: 0.5rem;
        }

        .input-action-btn {
            width: 42px;
            height: 42px;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .emoji-btn {
            background: #fbbf24;
            color: white;
            font-size: 1.2rem;
        }

        .voice-btn {
            background: var(--success-color);
            color: white;
        }

        .attachment-btn {
            background: var(--info-color);
            color: white;
        }

        .send-btn {
            background: var(--primary-gradient);
            color: white;
        }

        .input-action-btn:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-md);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* More Options Menu */
        .more-options-menu {
            position: absolute;
            top: calc(100% + 0.5rem);
            right: 0;
            background: white;
            border: 1px solid var(--dashboard-border);
            border-radius: 16px;
            box-shadow: var(--shadow-xl);
            z-index: 1001;
            min-width: 220px;
            padding: 0.5rem;
            opacity: 0;
            transform: translateY(-10px) scale(0.95);
            transition: all 0.3s ease;
            pointer-events: none;
        }

        .more-options-menu.show {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: all;
        }

        .menu-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.875rem 1rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--dashboard-text);
        }

        .menu-option:hover {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            transform: translateX(4px);
        }

        .menu-option.danger:hover {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            color: var(--error-color);
        }

        .menu-option i {
            width: 18px;
            text-align: center;
            font-size: 1rem;
        }

        .menu-option.danger i {
            color: var(--error-color);
        }

        /* Modal Overlay */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
            z-index: 10000;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background: var(--dashboard-card-bg);
            backdrop-filter: blur(12px);
            border: 1px solid var(--dashboard-border);
            border-radius: 24px;
            padding: 2.5rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s ease;
            box-shadow: var(--shadow-2xl);
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--dashboard-border);
        }

        .modal-header h3 {
            font-size: 1.6rem;
            font-weight: 700;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-family: 'Space Grotesk', sans-serif;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--dashboard-text-light);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            background: var(--dashboard-border);
            color: var(--dashboard-text);
        }

        /* Profile Modal Content */
        .profile-info {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 16px;
            border: 1px solid var(--dashboard-border);
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 20px;
            background: var(--chat-gradient);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 700;
            font-family: 'Space Grotesk', sans-serif;
            box-shadow: var(--shadow-lg);
        }

        .profile-details h4 {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--dashboard-text);
            margin-bottom: 0.5rem;
            font-family: 'Space Grotesk', sans-serif;
        }

        .profile-role {
            color: var(--dashboard-text-light);
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .profile-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--success-color);
            font-weight: 600;
        }

        .profile-fields {
            display: grid;
            gap: 1.5rem;
        }

        .profile-field {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: white;
            border: 1px solid var(--dashboard-border);
            border-radius: 12px;
        }

        .field-label {
            color: var(--dashboard-text-light);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .field-value {
            color: var(--dashboard-text);
            font-weight: 600;
        }

        /* Confirmation Modal */
        .confirmation-content {
            text-align: center;
            padding: 2rem;
        }

        .confirmation-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--error-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 0 auto 2rem;
            box-shadow: var(--shadow-lg);
        }

        .confirmation-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dashboard-text);
            margin-bottom: 1rem;
            font-family: 'Space Grotesk', sans-serif;
        }

        .confirmation-message {
            color: var(--dashboard-text-light);
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 2rem;
        }

        .confirmation-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .confirm-btn {
            padding: 1rem 2rem;
            background: var(--error-color);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cancel-btn {
            padding: 1rem 2rem;
            background: transparent;
            color: var(--dashboard-text);
            border: 2px solid var(--dashboard-border);
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .confirm-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .cancel-btn:hover {
            background: var(--dashboard-text);
            color: white;
        }

        /* Mobile Menu Button */
        .mobile-menu-btn {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            width: 44px;
            height: 44px;
            border: none;
            background: var(--primary-gradient);
            color: white;
            border-radius: 12px;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10;
            box-shadow: var(--shadow-md);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .chat-container {
                grid-template-columns: 320px 1fr;
            }
        }

        @media (max-width: 768px) {
            .dashboard-header-content {
                padding: 0 1rem;
            }

            .chat-container {
                grid-template-columns: 1fr;
                position: relative;
            }

            .chat-sidebar {
                position: fixed;
                left: -100%;
                width: 100%;
                max-width: 380px;
                height: calc(100vh - var(--dashboard-header-height));
                z-index: 1001;
                transition: left 0.3s ease;
                top: var(--dashboard-header-height);
            }

            .chat-sidebar.open {
                left: 0;
            }

            .mobile-sidebar-overlay {
                position: fixed;
                top: var(--dashboard-header-height);
                left: 0;
                width: 100%;
                height: calc(100vh - var(--dashboard-header-height));
                background: rgba(0, 0, 0, 0.5);
                z-index: 1000;
                display: none;
            }

            .mobile-sidebar-overlay.active {
                display: block;
            }

            .chat-header {
                padding-left: 5rem;
            }

            .mobile-menu-btn {
                display: flex;
            }

            .message {
                max-width: 90%;
            }

            .chat-input {
                padding: 1rem;
            }

            .sidebar-header {
                padding: 1.5rem;
            }

            .empty-chat {
                padding: 2rem 1rem;
            }

            .empty-chat h3 {
                font-size: 1.4rem;
            }

            .empty-chat p {
                font-size: 0.95rem;
            }
        }

        @media (max-width: 480px) {
            .dashboard-header-content {
                padding: 0 0.5rem;
            }

            .chat-sidebar {
                width: 100%;
                max-width: none;
            }

            .filter-tabs {
                flex-direction: column;
                gap: 0.5rem;
            }

            .chat-item {
                padding: 1rem 1.5rem;
            }

            .chat-avatar {
                width: 45px;
                height: 45px;
            }
        }

        /* Notification Styles */
        .notification {
            position: fixed;
            top: 90px;
            right: 20px;
            background: var(--success-gradient);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 16px;
            box-shadow: var(--shadow-xl);
            z-index: 10000;
            font-weight: 600;
            max-width: 400px;
            animation: notificationSlideIn 0.4s ease;
            opacity: 0;
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .notification.show {
            opacity: 1;
        }

        .notification.info {
            background: var(--primary-gradient);
        }

        .notification.error {
            background: var(--secondary-gradient);
        }

        @keyframes notificationSlideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Scrollbar Styling */
        .chat-messages::-webkit-scrollbar,
        .chat-list::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track,
        .chat-list::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .chat-messages::-webkit-scrollbar-thumb,
        .chat-list::-webkit-scrollbar-thumb {
            background: var(--primary-gradient);
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <!-- Dashboard Header -->
    <header class="dashboard-header">
        <div class="dashboard-header-content">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <button onclick="window.location.href='student-dashboard.html'" class="back-btn">
                    <i class="fas fa-arrow-left"></i>
                    <span>Back to Dashboard</span>
                </button>
                <div class="dashboard-logo">
                    <a href="student-dashboard.html">
                        <i class="fas fa-network-wired"></i>
                        <span>SkillSync</span>
                    </a>
                </div>
            </div>
            
            <div class="user-info">
                <div class="user-avatar-header">A</div>
                <span class="user-name">Ayush Kumar</span>
            </div>
        </div>
    </header>

    <!-- Chat Container -->
    <div class="chat-container">
        <!-- Chat Sidebar -->
        <div class="chat-sidebar" id="chatSidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-comments"></i> Messages</h2>
                
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" placeholder="Search conversations..." id="searchInput" onkeyup="handleSearch()">
                </div>

                <div class="filter-tabs">
                    <button class="filter-tab active" onclick="filterChats('all')" id="all-tab">All</button>
                    <button class="filter-tab" onclick="filterChats('recruiters')" id="recruiters-tab">Recruiters</button>
                    <button class="filter-tab" onclick="filterChats('companies')" id="companies-tab">Companies</button>
                </div>
            </div>

            <div class="chat-list" id="chatList">
                <!-- Recruiter 1 -->
                <div class="chat-item active" onclick="openChat('recruiter-1')" data-type="recruiters" data-chat-id="recruiter-1">
                    <div class="chat-avatar recruiter-avatar">
                        S
                        <div class="online-status"></div>
                    </div>
                    <div class="chat-info">
                        <div class="chat-name">
                            Sarah Chen
                            <i class="fas fa-check-circle verified-badge" title="Verified Recruiter"></i>
                        </div>
                        <div class="chat-preview">Thanks for your interest! I'd love to discuss the Full Stack position...</div>
                    </div>
                    <div class="chat-meta">
                        <div class="chat-time">2:30 PM</div>
                        <div class="unread-badge">2</div>
                    </div>
                </div>

                <!-- Recruiter 2 -->
                <div class="chat-item" onclick="openChat('recruiter-2')" data-type="recruiters" data-chat-id="recruiter-2">
                    <div class="chat-avatar recruiter-avatar" style="background: var(--info-color);">
                        M
                        <div class="online-status"></div>
                    </div>
                    <div class="chat-info">
                        <div class="chat-name">
                            Mike Johnson
                            <i class="fas fa-check-circle verified-badge" title="Verified Recruiter"></i>
                        </div>
                        <div class="chat-preview">Your profile looks impressive! Are you available for a quick call?</div>
                    </div>
                    <div class="chat-meta">
                        <div class="chat-time">1:15 PM</div>
                    </div>
                </div>

                <!-- Company Representative -->
                <div class="chat-item" onclick="openChat('company-1')" data-type="companies" data-chat-id="company-1">
                    <div class="chat-avatar company-avatar">
                        TC
                        <div class="offline-status"></div>
                    </div>
                    <div class="chat-info">
                        <div class="chat-name">TechCorp HR</div>
                        <div class="chat-preview">We'd like to schedule an interview for next week...</div>
                    </div>
                    <div class="chat-meta">
                        <div class="chat-time">Yesterday</div>
                    </div>
                </div>

                <!-- Startup Founder -->
                <div class="chat-item" onclick="openChat('startup-1')" data-type="companies" data-chat-id="startup-1">
                    <div class="chat-avatar startup-avatar">
                        A
                        <div class="online-status"></div>
                    </div>
                    <div class="chat-info">
                        <div class="chat-name">Alex Rivera - StartupXYZ</div>
                        <div class="chat-preview typing-preview" id="startup-typing">typing...</div>
                    </div>
                    <div class="chat-meta">
                        <div class="chat-time">11:45 AM</div>
                    </div>
                </div>

                <!-- Marketing Manager -->
                <div class="chat-item" onclick="openChat('marketing-1')" data-type="recruiters" data-chat-id="marketing-1">
                    <div class="chat-avatar" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                        D
                        <div class="online-status"></div>
                    </div>
                    <div class="chat-info">
                        <div class="chat-name">Diana Smith - Creative Agency</div>
                        <div class="chat-preview">We have an exciting creative role that matches your portfolio...</div>
                    </div>
                    <div class="chat-meta">
                        <div class="chat-time">Yesterday</div>
                        <div class="priority-indicator"></div>
                    </div>
                </div>

                <!-- Remote Company -->
                <div class="chat-item" onclick="openChat('remote-1')" data-type="companies" data-chat-id="remote-1">
                    <div class="chat-avatar" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);">
                        RC
                        <div class="online-status"></div>
                    </div>
                    <div class="chat-info">
                        <div class="chat-name">RemoteCorp Talent Team</div>
                        <div class="chat-preview">100% remote position available. Interested in learning more?</div>
                    </div>
                    <div class="chat-meta">
                        <div class="chat-time">2 days ago</div>
                    </div>
                </div>

                <!-- AI Startup -->
                <div class="chat-item" onclick="openChat('ai-startup')" data-type="companies" data-chat-id="ai-startup">
                    <div class="chat-avatar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        AI
                        <div class="away-status"></div>
                    </div>
                    <div class="chat-info">
                        <div class="chat-name">AI Innovations Team</div>
                        <div class="chat-preview">Machine Learning Engineer position - Perfect match for your skills!</div>
                    </div>
                    <div class="chat-meta">
                        <div class="chat-time">3 days ago</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Main -->
        <div class="chat-main no-chat" id="chatMain">
            <div class="empty-chat">
                <div class="empty-chat-icon">
                    <i class="fas fa-comments"></i>
                </div>
                <h3>Welcome to SkillSync Messages!</h3>
                <p>Connect with top recruiters and companies. Select a conversation to start chatting about exciting opportunities.</p>
                <button class="start-chat-btn" onclick="showChatSelection()">
                    ðŸ’¬ Start Conversation
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Sidebar Overlay -->
    <div class="mobile-sidebar-overlay" id="mobileOverlay" onclick="closeMobileSidebar()"></div>

    <!-- Profile Modal -->
    <div class="modal-overlay" id="profileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="profileModalTitle">User Profile</h3>
                <button class="close-modal" onclick="closeModal('profileModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="profileModalContent">
                <!-- Profile content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal-overlay" id="confirmationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="confirmationModalTitle">Confirm Action</h3>
                <button class="close-modal" onclick="closeModal('confirmationModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="confirmation-content" id="confirmationModalContent">
                <!-- Confirmation content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Global variables
        let currentChat = 'recruiter-1';
        let isTyping = false;
        let typingTimeout = null;
        let messageQueue = [];
        let autoReplyEnabled = true;
        let currentFilter = 'all';
        let mutedChats = new Set();
        let blockedChats = new Set();

        // Enhanced chat data with more realistic conversations
        const chatData = {
            'recruiter-1': {
                name: 'Sarah Chen',
                avatar: 'S',
                status: 'Online â€¢ Senior Recruiter at TechStart Inc.',
                type: 'recruiter',
                lastSeen: 'Online',
                company: 'TechStart Inc.',
                location: 'San Francisco, CA',
                email: 'sarah.chen@techstart.com',
                phone: '+1 (555) 123-4567',
                linkedin: 'linkedin.com/in/sarahchen',
                messages: [
                    {
                        type: 'received',
                        content: 'Hi Ayush! I came across your profile on SkillSync and I\'m really impressed with your full-stack development experience.',
                        time: '2:25 PM',
                        timestamp: new Date(Date.now() - 5 * 60000)
                    },
                    {
                        type: 'received',
                        content: 'We have an exciting Full Stack Developer position at TechStart Inc. that I think would be perfect for you. Are you interested in learning more about the role?',
                        time: '2:30 PM',
                        timestamp: new Date(Date.now() - 0 * 60000)
                    }
                ]
            },
            'recruiter-2': {
                name: 'Mike Johnson',
                avatar: 'M',
                status: 'Online â€¢ Senior Recruiter at DevCorp',
                type: 'recruiter',
                lastSeen: 'Online',
                company: 'DevCorp',
                location: 'New York, NY',
                email: 'mike.johnson@devcorp.com',
                phone: '+1 (555) 987-6543',
                linkedin: 'linkedin.com/in/mikejohnson',
                messages: [
                    {
                        type: 'received',
                        content: 'Hello Ayush! Your React and Node.js skills really caught my attention on your SkillSync profile.',
                        time: '1:10 PM',
                        timestamp: new Date(Date.now() - 80 * 60000)
                    },
                    {
                        type: 'received',
                        content: 'We\'re looking for someone with your exact skill set for a senior developer role. Are you available for a quick 15-minute call this week?',
                        time: '1:15 PM',
                        timestamp: new Date(Date.now() - 75 * 60000)
                    }
                ]
            },
            'company-1': {
                name: 'TechCorp HR',
                avatar: 'TC',
                status: 'Offline â€¢ Last seen 2 hours ago',
                type: 'company',
                lastSeen: '2 hours ago',
                company: 'TechCorp Solutions',
                location: 'Austin, TX',
                email: 'hr@techcorp.com',
                phone: '+1 (555) 456-7890',
                website: 'techcorp.com',
                messages: [
                    {
                        type: 'received',
                        content: 'Thank you for applying to our Senior Developer position through SkillSync. We\'ve reviewed your application and are impressed!',
                        time: 'Yesterday',
                        timestamp: new Date(Date.now() - 24 * 60 * 60000)
                    },
                    {
                        type: 'received',
                        content: 'We\'d like to move forward with the interview process. Are you available next Tuesday or Wednesday for a technical interview?',
                        time: 'Yesterday',
                        timestamp: new Date(Date.now() - 24 * 60 * 60000 + 5 * 60000)
                    }
                ]
            },
            'startup-1': {
                name: 'Alex Rivera - StartupXYZ',
                avatar: 'A',
                status: 'Online â€¢ Founder & CEO',
                type: 'company',
                lastSeen: 'Online',
                company: 'StartupXYZ',
                location: 'Remote',
                email: 'alex@startupxyz.com',
                phone: '+1 (555) 321-9876',
                website: 'startupxyz.com',
                messages: [
                    {
                        type: 'received',
                        content: 'Hey Ayush! I saw your incredible project portfolio on SkillSync. Your work is exactly what we need at StartupXYZ.',
                        time: '11:40 AM',
                        timestamp: new Date(Date.now() - 170 * 60000)
                    },
                    {
                        type: 'received',
                        content: 'We\'re a fast-growing startup and could really use someone with your skills. Interested in being one of our first 10 employees? We offer equity + competitive salary!',
                        time: '11:45 AM',
                        timestamp: new Date(Date.now() - 165 * 60000)
                    }
                ]
            },
            'marketing-1': {
                name: 'Diana Smith - Creative Agency',
                avatar: 'D',
                status: 'Online â€¢ Marketing Director',
                type: 'recruiter',
                lastSeen: 'Online',
                company: 'Creative Agency Pro',
                location: 'Los Angeles, CA',
                email: 'diana@creativeagency.com',
                phone: '+1 (555) 654-3210',
                linkedin: 'linkedin.com/in/dianasmith',
                messages: [
                    {
                        type: 'received',
                        content: 'Hi Ayush! I\'ve been following your creative work and I\'m really impressed with your portfolio on SkillSync.',
                        time: 'Yesterday',
                        timestamp: new Date(Date.now() - 24 * 60 * 60000)
                    },
                    {
                        type: 'received',
                        content: 'We have an exciting Digital Marketing & Design role at our creative agency that could be perfect for you. Would you like to schedule a call?',
                        time: 'Yesterday',
                        timestamp: new Date(Date.now() - 24 * 60 * 60000 + 10 * 60000)
                    }
                ]
            },
            'remote-1': {
                name: 'RemoteCorp Talent Team',
                avatar: 'RC',
                status: 'Online â€¢ Remote-First Company',
                type: 'company',
                lastSeen: 'Online',
                company: 'RemoteCorp',
                location: 'Fully Remote',
                email: 'talent@remotecorp.com',
                phone: '+1 (555) 111-2222',
                website: 'remotecorp.com',
                messages: [
                    {
                        type: 'received',
                        content: 'Hello Ayush! We\'re a 100% remote company and we\'ve been looking for talented developers like you.',
                        time: '2 days ago',
                        timestamp: new Date(Date.now() - 48 * 60 * 60000)
                    },
                    {
                        type: 'received',
                        content: 'Your SkillSync profile shows exactly what we need. We offer flexible hours, competitive pay, and amazing benefits. Interested in learning more?',
                        time: '2 days ago',
                        timestamp: new Date(Date.now() - 48 * 60 * 60000 + 15 * 60000)
                    }
                ]
            },
            'ai-startup': {
                name: 'AI Innovations Team',
                avatar: 'AI',
                status: 'Away â€¢ Will be back in 1 hour',
                type: 'company',
                lastSeen: '1 hour ago',
                company: 'AI Innovations Inc.',
                location: 'Boston, MA',
                email: 'team@aiinnovations.com',
                phone: '+1 (555) 777-8888',
                website: 'aiinnovations.com',
                messages: [
                    {
                        type: 'received',
                        content: 'Hi there! Your machine learning projects on SkillSync are incredible. We\'re building the future of AI.',
                        time: '3 days ago',
                        timestamp: new Date(Date.now() - 72 * 60 * 60000)
                    },
                    {
                        type: 'received',
                        content: 'We have a Machine Learning Engineer position that matches your skills perfectly. The role involves working on cutting-edge AI algorithms. Interested?',
                        time: '3 days ago',
                        timestamp: new Date(Date.now() - 72 * 60 * 60000 + 20 * 60000)
                    }
                ]
            }
        };

        // Recruiter response templates for realistic conversations
        const recruiterResponses = {
            greetings: [
                "Hi! Thanks for getting back to me so quickly!",
                "Great to hear from you! I'm excited to discuss this opportunity.",
                "Hello! I appreciate your prompt response.",
                "Thanks for reaching out! Let's explore this further."
            ],
            interest: [
                "That's fantastic! I can tell you're passionate about development.",
                "Perfect! Your enthusiasm is exactly what we're looking for.",
                "Excellent! I think you'll love what we have to offer.",
                "That's great to hear! Let me share more details."
            ],
            scheduling: [
                "How about we schedule a 30-minute call this week?",
                "Would you be available for a brief call tomorrow or Friday?",
                "Let's set up a time to discuss this in detail. What works for you?",
                "I'd love to schedule a call. Are you free any time this week?"
            ],
            details: [
                "This is a full-time remote position with excellent benefits.",
                "The role offers competitive salary plus equity options.",
                "We're looking for someone to join our core development team.",
                "This position has great growth opportunities and learning potential."
            ],
            closing: [
                "Looking forward to hearing from you!",
                "Let me know if you have any questions!",
                "Excited to potentially work together!",
                "Hope to connect with you soon!"
            ]
        };

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ðŸ’¬ Enhanced Messages Page Loaded with More Options');
            setupEventListeners();
            loadDefaultChat();
            simulateRealTimeUpdates();
            
            // Check if mobile and show sidebar by default
            if (window.innerWidth <= 768) {
                showChatSelection();
            }

            // Close modals when clicking outside
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal-overlay')) {
                    if (e.target.id === 'profileModal') {
                        closeModal('profileModal');
                    } else if (e.target.id === 'confirmationModal') {
                        closeModal('confirmationModal');
                    }
                }

                // Close more options menu when clicking outside
                const moreOptionsMenu = document.querySelector('.more-options-menu');
                if (moreOptionsMenu && !e.target.closest('.chat-action-btn') && !e.target.closest('.more-options-menu')) {
                    closeMoreOptionsMenu();
                }
            });
        });

        // Setup event listeners
        function setupEventListeners() {
            // Window resize handler
            window.addEventListener('resize', handleWindowResize);
            
            // Visibility change handler for real-time simulation
            document.addEventListener('visibilitychange', function() {
                if (!document.hidden) {
                    simulateRealTimeUpdates();
                }
            });
        }

        // Load default chat
        function loadDefaultChat() {
            openChat('recruiter-1');
        }

        // Handle search with enhanced functionality
        function handleSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const chatItems = document.querySelectorAll('.chat-item');
            let visibleCount = 0;
            
            chatItems.forEach(item => {
                const name = item.querySelector('.chat-name').textContent.toLowerCase();
                const preview = item.querySelector('.chat-preview').textContent.toLowerCase();
                
                if (name.includes(query) || preview.includes(query)) {
                    item.style.display = 'flex';
                    visibleCount++;
                } else {
                    item.style.display = 'none';
                }
            });

            // Show search results feedback
            if (query && visibleCount === 0) {
                showNotification('No conversations found matching your search', 'info');
            }
        }

        // Filter chats by type
        function filterChats(type) {
            currentFilter = type;
            const chatItems = document.querySelectorAll('.chat-item');
            const tabs = document.querySelectorAll('.filter-tab');
            
            // Update active tab
            tabs.forEach(tab => tab.classList.remove('active'));
            document.getElementById(`${type}-tab`).classList.add('active');
            
            // Filter chat items
            chatItems.forEach(item => {
                const itemType = item.getAttribute('data-type');
                if (type === 'all' || itemType === type) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Enhanced open chat function
        function openChat(chatId) {
            currentChat = chatId;
            
            // Update active chat item
            document.querySelectorAll('.chat-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const chatItem = document.querySelector(`[onclick="openChat('${chatId}')"]`);
            if (chatItem) {
                chatItem.classList.add('active');
                // Remove unread badge
                const unreadBadge = chatItem.querySelector('.unread-badge');
                if (unreadBadge) {
                    unreadBadge.style.animation = 'none';
                    setTimeout(() => unreadBadge.remove(), 300);
                }
            }

            // Load chat interface
            loadChatInterface(chatId);
            
            // Close mobile sidebar if open
            closeMobileSidebar();

            // Mark messages as read
            markMessagesAsRead(chatId);
        }

        // Enhanced load chat interface
        function loadChatInterface(chatId) {
            const chat = chatData[chatId];
            if (!chat) return;

            const chatMain = document.getElementById('chatMain');
            chatMain.className = 'chat-main';
            
            const avatarClass = getAvatarClass(chat.type);
            const statusIcon = getStatusIcon(chat.status);
            
            chatMain.innerHTML = `
                <!-- Mobile Menu Button -->
                <button class="mobile-menu-btn" onclick="openMobileSidebar()">
                    <i class="fas fa-bars"></i>
                </button>

                <!-- Chat Header -->
                <div class="chat-header">
                    <div class="chat-user-info">
                        <div class="chat-user-avatar ${avatarClass}">
                            ${chat.avatar}
                            ${statusIcon}
                        </div>
                        <div class="chat-user-details">
                            <h4>${chat.name}</h4>
                            <div class="chat-user-status">
                                ${getStatusDot(chat.status)}
                                ${chat.status}
                            </div>
                        </div>
                    </div>
                    <div class="chat-actions">
                        <button class="chat-action-btn" title="Voice Call" onclick="initiateCall('voice')">
                            <i class="fas fa-phone"></i>
                        </button>
                        <button class="chat-action-btn" title="Video Call" onclick="initiateCall('video')">
                            <i class="fas fa-video"></i>
                        </button>
                        <button class="chat-action-btn" title="More Options" onclick="toggleMoreOptions(event)">
                            <i class="fas fa-ellipsis-v"></i>
                            <div class="more-options-menu" id="moreOptionsMenu">
                                <div class="menu-option" onclick="viewProfile('${chatId}')">
                                    <i class="fas fa-user"></i>
                                    <span>View Profile</span>
                                </div>
                                <div class="menu-option" onclick="toggleMuteNotifications('${chatId}')">
                                    <i class="fas fa-bell${mutedChats.has(chatId) ? '-slash' : ''}"></i>
                                    <span>${mutedChats.has(chatId) ? 'Unmute' : 'Mute'} Notifications</span>
                                </div>
                                <div class="menu-option danger" onclick="blockUser('${chatId}')">
                                    <i class="fas fa-ban"></i>
                                    <span>Block User</span>
                                </div>
                                <div class="menu-option" onclick="reportIssue('${chatId}')">
                                    <i class="fas fa-flag"></i>
                                    <span>Report Issue</span>
                                </div>
                                <div class="menu-option danger" onclick="clearChatHistory('${chatId}')">
                                    <i class="fas fa-trash"></i>
                                    <span>Clear Chat History</span>
                                </div>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Chat Messages -->
                <div class="chat-messages" id="chatMessages">
                    ${renderMessages(chat.messages, chat)}
                    
                    <!-- Typing Indicator -->
                    <div class="typing-indicator" id="typingIndicator">
                        <div class="message-avatar ${avatarClass}">
                            ${chat.avatar}
                        </div>
                        <div class="typing-bubble">
                            <div class="typing-dots">
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                            </div>
                            <span style="margin-left: 0.5rem; font-style: italic; color: var(--dashboard-text-light);">typing...</span>
                        </div>
                    </div>
                </div>

                <!-- Chat Input -->
                <div class="chat-input">
                    <div class="input-container">
                        <button class="input-action-btn emoji-btn" title="Emoji" onclick="toggleEmojiPicker()">
                            ðŸ˜Š
                        </button>
                        <textarea class="message-input" id="messageInput" placeholder="Type your message here..." rows="1" onkeydown="handleKeyDown(event)" oninput="handleInputChange()"></textarea>
                        <button class="input-action-btn voice-btn" title="Voice Message" onclick="startVoiceRecording()">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <button class="input-action-btn attachment-btn" title="Attach File" onclick="attachFile()">
                            <i class="fas fa-paperclip"></i>
                        </button>
                        <button class="input-action-btn send-btn" id="sendBtn" onclick="sendMessage()" title="Send Message" disabled>
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            `;

            // Scroll to bottom with smooth animation
            setTimeout(() => {
                const messagesContainer = document.getElementById('chatMessages');
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 100);
        }

        // Get avatar class based on type
        function getAvatarClass(type) {
            switch(type) {
                case 'recruiter': return 'recruiter-avatar';
                case 'company': return 'company-avatar';
                default: return 'startup-avatar';
            }
        }

        // Get status icon
        function getStatusIcon(status) {
            if (status.includes('Online')) return '<div class="online-status"></div>';
            if (status.includes('Away')) return '<div class="away-status"></div>';
            return '<div class="offline-status"></div>';
        }

        // Get status dot
        function getStatusDot(status) {
            if (status.includes('Online')) return '<div class="status-dot"></div>';
            return '';
        }

        // Enhanced render messages
        function renderMessages(messages, chat) {
            return messages.map((message, index) => {
                const isLastMessage = index === messages.length - 1;
                const showStatus = message.type === 'sent' && isLastMessage;
                
                return `
                    <div class="message ${message.type}">
                        <div class="message-avatar ${message.type === 'received' ? getAvatarClass(chat.type) : ''}">
                            ${message.type === 'received' ? chat.avatar : 'A'}
                        </div>
                        <div class="message-content">
                            <div class="message-bubble">${message.content}</div>
                            <div class="message-time">${message.time}</div>
                            ${showStatus ? '<div class="message-status read"><i class="fas fa-check-double"></i> Read</div>' : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Toggle more options menu
        function toggleMoreOptions(event) {
            event.stopPropagation();
            const menu = document.getElementById('moreOptionsMenu');
            
            if (menu.classList.contains('show')) {
                closeMoreOptionsMenu();
            } else {
                menu.classList.add('show');
                
                // Update mute button text based on current state
                const muteOption = menu.querySelector('[onclick*="toggleMuteNotifications"]');
                const isMuted = mutedChats.has(currentChat);
                muteOption.innerHTML = `
                    <i class="fas fa-bell${isMuted ? '-slash' : ''}"></i>
                    <span>${isMuted ? 'Unmute' : 'Mute'} Notifications</span>
                `;
            }
        }

        // Close more options menu
        function closeMoreOptionsMenu() {
            const menu = document.getElementById('moreOptionsMenu');
            if (menu) {
                menu.classList.remove('show');
            }
        }

        // View Profile Function
        function viewProfile(chatId) {
            closeMoreOptionsMenu();
            const chat = chatData[chatId];
            
            const profileModal = document.getElementById('profileModal');
            const profileTitle = document.getElementById('profileModalTitle');
            const profileContent = document.getElementById('profileModalContent');
            
            profileTitle.textContent = `${chat.name} - Profile`;
            
            profileContent.innerHTML = `
                <div class="profile-info">
                    <div class="profile-avatar ${getAvatarClass(chat.type)}">
                        ${chat.avatar}
                    </div>
                    <div class="profile-details">
                        <h4>${chat.name}</h4>
                        <div class="profile-role">${chat.company || chat.type}</div>
                        <div class="profile-status">
                            ${getStatusDot(chat.status)}
                            ${chat.lastSeen}
                        </div>
                    </div>
                </div>
                
                <div class="profile-fields">
                    <div class="profile-field">
                        <span class="field-label">Company</span>
                        <span class="field-value">${chat.company || 'N/A'}</span>
                    </div>
                    <div class="profile-field">
                        <span class="field-label">Location</span>
                        <span class="field-value">${chat.location || 'N/A'}</span>
                    </div>
                    <div class="profile-field">
                        <span class="field-label">Email</span>
                        <span class="field-value">${chat.email || 'N/A'}</span>
                    </div>
                    <div class="profile-field">
                        <span class="field-label">Phone</span>
                        <span class="field-value">${chat.phone || 'N/A'}</span>
                    </div>
                    ${chat.linkedin ? `
                    <div class="profile-field">
                        <span class="field-label">LinkedIn</span>
                        <span class="field-value">${chat.linkedin}</span>
                    </div>
                    ` : ''}
                    ${chat.website ? `
                    <div class="profile-field">
                        <span class="field-label">Website</span>
                        <span class="field-value">${chat.website}</span>
                    </div>
                    ` : ''}
                </div>
            `;
            
            profileModal.classList.add('active');
            showNotification(`Viewing ${chat.name}'s profile ðŸ‘¤`, 'info');
        }

        // Toggle Mute Notifications
        function toggleMuteNotifications(chatId) {
            closeMoreOptionsMenu();
            const chat = chatData[chatId];
            const chatItem = document.querySelector(`[data-chat-id="${chatId}"]`);
            
            if (mutedChats.has(chatId)) {
                mutedChats.delete(chatId);
                chatItem.classList.remove('muted');
                
                // Remove muted indicator
                const mutedIndicator = chatItem.querySelector('.muted-indicator');
                if (mutedIndicator) {
                    mutedIndicator.remove();
                }
                
                showNotification(`${chat.name} notifications unmuted ðŸ””`, 'success');
            } else {
                mutedChats.add(chatId);
                chatItem.classList.add('muted');
                
                // Add muted indicator
                const chatName = chatItem.querySelector('.chat-name');
                if (!chatName.querySelector('.muted-indicator')) {
                    const mutedIcon = document.createElement('i');
                    mutedIcon.className = 'fas fa-bell-slash muted-indicator';
                    mutedIcon.title = 'Muted';
                    chatName.appendChild(mutedIcon);
                }
                
                showNotification(`${chat.name} notifications muted ðŸ”•`, 'info');
            }
        }

        // Block User Function
        function blockUser(chatId) {
            closeMoreOptionsMenu();
            const chat = chatData[chatId];
            
            showConfirmation(
                'Block User',
                `Are you sure you want to block ${chat.name}?`,
                'This will prevent them from contacting you and hide this conversation. You can unblock them later from your settings.',
                'Block User',
                () => {
                    blockedChats.add(chatId);
                    const chatItem = document.querySelector(`[data-chat-id="${chatId}"]`);
                    
                    // Hide the chat item with animation
                    chatItem.style.transform = 'translateX(-100%)';
                    chatItem.style.opacity = '0';
                    
                    setTimeout(() => {
                        chatItem.style.display = 'none';
                        showNotification(`${chat.name} has been blocked ðŸš«`, 'error');
                        
                        // Go back to empty state if current chat is blocked
                        if (currentChat === chatId) {
                            const chatMain = document.getElementById('chatMain');
                            chatMain.className = 'chat-main no-chat';
                            chatMain.innerHTML = `
                                <div class="empty-chat">
                                    <div class="empty-chat-icon">
                                        <i class="fas fa-ban"></i>
                                    </div>
                                    <h3>User Blocked</h3>
                                    <p>This conversation has been blocked. Select another conversation to continue chatting.</p>
                                </div>
                            `;
                        }
                    }, 300);
                }
            );
        }

        // Report Issue Function
        function reportIssue(chatId) {
            closeMoreOptionsMenu();
            const chat = chatData[chatId];
            
            showConfirmation(
                'Report Issue',
                `Report an issue with ${chat.name}?`,
                'This will send a report to our moderation team for review. The user will not be notified of this report.',
                'Send Report',
                () => {
                    showNotification(`Issue reported with ${chat.name}. Our team will review it shortly ðŸš¨`, 'info');
                }
            );
        }

        // Clear Chat History Function
        function clearChatHistory(chatId) {
            closeMoreOptionsMenu();
            const chat = chatData[chatId];
            
            showConfirmation(
                'Clear Chat History',
                `Clear all messages with ${chat.name}?`,
                'This will permanently delete all messages in this conversation. This action cannot be undone.',
                'Clear History',
                () => {
                    // Clear messages from chat data
                    chatData[chatId].messages = [];
                    
                    // Update UI
                    const messagesContainer = document.getElementById('chatMessages');
                    if (messagesContainer) {
                        messagesContainer.innerHTML = `
                            <div class="empty-chat">
                                <div class="empty-chat-icon">
                                    <i class="fas fa-broom"></i>
                                </div>
                                <h3>Chat History Cleared</h3>
                                <p>All messages have been deleted. Start a new conversation!</p>
                            </div>
                        `;
                    }
                    
                    // Update sidebar preview
                    updateChatPreview(chatId, 'Chat history cleared');
                    
                    showNotification(`Chat history with ${chat.name} cleared ðŸ§¹`, 'success');
                }
            );
        }

        // Show confirmation modal
        function showConfirmation(title, question, description, actionText, onConfirm) {
            const modal = document.getElementById('confirmationModal');
            const modalTitle = document.getElementById('confirmationModalTitle');
            const modalContent = document.getElementById('confirmationModalContent');
            
            modalTitle.textContent = title;
            
            modalContent.innerHTML = `
                <div class="confirmation-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="confirmation-title">${question}</div>
                <div class="confirmation-message">${description}</div>
                <div class="confirmation-actions">
                    <button class="cancel-btn" onclick="closeModal('confirmationModal')">
                        Cancel
                    </button>
                    <button class="confirm-btn" onclick="confirmAction(); closeModal('confirmationModal')">
                        ${actionText}
                    </button>
                </div>
            `;
            
            // Store the confirm callback
            window.confirmCallback = onConfirm;
            modal.classList.add('active');
        }

        // Confirm action
        function confirmAction() {
            if (window.confirmCallback) {
                window.confirmCallback();
                window.confirmCallback = null;
            }
        }

        // Close modal function
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.remove('active');
        }

        // Handle key down events
        function handleKeyDown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        // Handle input changes
        function handleInputChange() {
            const messageInput = document.getElementById('messageInput');
            const sendBtn = document.getElementById('sendBtn');
            
            // Auto-resize textarea
            messageInput.style.height = 'auto';
            messageInput.style.height = Math.min(messageInput.scrollHeight, 120) + 'px';
            
            // Update send button state
            if (messageInput.value.trim()) {
                sendBtn.disabled = false;
                sendBtn.style.opacity = '1';
            } else {
                sendBtn.disabled = true;
                sendBtn.style.opacity = '0.5';
            }
        }

        // Enhanced send message
        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();
            
            if (!message || !currentChat || blockedChats.has(currentChat)) return;

            // Add user message with animation
            addMessage('sent', message);
            messageInput.value = '';
            messageInput.style.height = 'auto';
            
            // Reset send button
            const sendBtn = document.getElementById('sendBtn');
            sendBtn.disabled = true;
            sendBtn.style.opacity = '0.5';

            // Update chat preview in sidebar
            updateChatPreview(currentChat, message);

            // Show typing indicator and generate response
            if (autoReplyEnabled) {
                setTimeout(() => {
                    showTypingIndicator();
                    setTimeout(() => {
                        generateIntelligentResponse(message);
                    }, 2000 + Math.random() * 3000);
                }, 500);
            }
        }

        // Enhanced add message function
        function addMessage(type, content, skipScroll = false) {
            const messagesContainer = document.getElementById('chatMessages');
            if (!messagesContainer) return;

            const currentTime = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            messageDiv.style.opacity = '0';
            messageDiv.style.transform = 'translateY(20px)';
            
            const chat = chatData[currentChat];
            messageDiv.innerHTML = `
                <div class="message-avatar ${type === 'received' ? getAvatarClass(chat.type) : ''}">
                    ${type === 'received' ? chat.avatar : 'A'}
                </div>
                <div class="message-content">
                    <div class="message-bubble">${content}</div>
                    <div class="message-time">${currentTime}</div>
                    ${type === 'sent' ? '<div class="message-status"><i class="fas fa-check"></i> Sent</div>' : ''}
                </div>
            `;

            // Hide typing indicator
            hideTypingIndicator();
            
            messagesContainer.appendChild(messageDiv);
            
            // Animate message appearance
            setTimeout(() => {
                messageDiv.style.transition = 'all 0.4s ease';
                messageDiv.style.opacity = '1';
                messageDiv.style.transform = 'translateY(0)';
            }, 100);

            // Scroll to bottom
            if (!skipScroll) {
                setTimeout(() => {
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                }, 150);
            }

            // Store message in chat data
            if (!chatData[currentChat].messages) chatData[currentChat].messages = [];
            chatData[currentChat].messages.push({
                type: type,
                content: content,
                time: currentTime,
                timestamp: new Date()
            });

            // Mark as read after a short delay if it's a received message
            if (type === 'received') {
                setTimeout(() => {
                    const statusElement = messageDiv.querySelector('.message-status');
                    if (statusElement) {
                        statusElement.innerHTML = '<i class="fas fa-check-double"></i> Read';
                        statusElement.classList.add('read');
                    }
                }, 1000);
            }
        }

        // Show typing indicator with animation
        function showTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.classList.add('show');
                const messagesContainer = document.getElementById('chatMessages');
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
        }

        // Hide typing indicator
        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.classList.remove('show');
            }
        }

        // Generate intelligent responses based on user message
        function generateIntelligentResponse(userMessage) {
            const lowerMessage = userMessage.toLowerCase();
            let response = "";

            // Intelligent response generation based on keywords
            if (lowerMessage.includes('hi') || lowerMessage.includes('hello') || lowerMessage.includes('hey')) {
                response = getRandomResponse(recruiterResponses.greetings);
            } else if (lowerMessage.includes('interested') || lowerMessage.includes('yes') || lowerMessage.includes('sure')) {
                response = getRandomResponse(recruiterResponses.interest);
            } else if (lowerMessage.includes('call') || lowerMessage.includes('interview') || lowerMessage.includes('meeting')) {
                response = getRandomResponse(recruiterResponses.scheduling);
            } else if (lowerMessage.includes('details') || lowerMessage.includes('more') || lowerMessage.includes('tell me')) {
                response = getRandomResponse(recruiterResponses.details);
            } else if (lowerMessage.includes('thank') || lowerMessage.includes('thanks')) {
                response = "You're very welcome! " + getRandomResponse(recruiterResponses.closing);
            } else if (lowerMessage.includes('salary') || lowerMessage.includes('pay') || lowerMessage.includes('compensation')) {
                response = "The salary range is competitive and we also offer excellent benefits including health insurance, equity, and flexible PTO. We can discuss specific numbers during our call!";
            } else if (lowerMessage.includes('remote') || lowerMessage.includes('work from home')) {
                response = "Yes! This position is fully remote with occasional team meetups. We believe in work-life balance and flexible hours.";
            } else if (lowerMessage.includes('skills') || lowerMessage.includes('requirements')) {
                response = "Based on your SkillSync profile, you already have most of the skills we're looking for! We'd love to discuss how your experience aligns with our needs.";
            } else {
                // Default contextual responses
                const defaultResponses = [
                    "That's great to hear! I'd love to learn more about your experience.",
                    "Interesting! Can you tell me more about that?",
                    "Perfect! I think this opportunity would be a great fit for you.",
                    "Thanks for sharing that! Let's discuss how this aligns with our role.",
                    "I appreciate your response! When would be a good time for a quick call?",
                    "That sounds excellent! I'm excited to explore this opportunity with you."
                ];
                response = getRandomResponse(defaultResponses);
            }

            addMessage('received', response);
            updateChatPreview(currentChat, response);
        }

        // Get random response from array
        function getRandomResponse(responses) {
            return responses[Math.floor(Math.random() * responses.length)];
        }

        // Update chat preview in sidebar
        function updateChatPreview(chatId, message) {
            const chatItem = document.querySelector(`[data-chat-id="${chatId}"]`);
            if (chatItem) {
                const preview = chatItem.querySelector('.chat-preview');
                const time = chatItem.querySelector('.chat-time');
                
                preview.textContent = message.length > 60 ? message.substring(0, 60) + '...' : message;
                time.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                
                // Move chat to top of list
                const chatList = document.getElementById('chatList');
                chatList.insertBefore(chatItem, chatList.firstChild);
            }
        }

        // Mark messages as read
        function markMessagesAsRead(chatId) {
            // Simulate marking messages as read
            setTimeout(() => {
                const messageStatuses = document.querySelectorAll('.message-status');
                messageStatuses.forEach(status => {
                    if (!status.classList.contains('read')) {
                        status.innerHTML = '<i class="fas fa-check-double"></i> Read';
                        status.classList.add('read');
                    }
                });
            }, 500);
        }

        // Simulate real-time updates
        function simulateRealTimeUpdates() {
            // Simulate new message notifications
            setInterval(() => {
                if (Math.random() < 0.1 && document.hidden) { // 10% chance when tab is hidden
                    simulateNewMessage();
                }
            }, 30000); // Every 30 seconds

            // Simulate status changes
            setInterval(() => {
                simulateStatusChanges();
            }, 60000); // Every minute
        }

        // Simulate new message from random contact
        function simulateNewMessage() {
            const chatIds = Object.keys(chatData);
            const randomChat = chatIds[Math.floor(Math.random() * chatIds.length)];
            
            if (randomChat !== currentChat && !blockedChats.has(randomChat)) {
                const newMessages = [
                    "Just wanted to follow up on our previous conversation!",
                    "Are you still interested in the position we discussed?",
                    "I have some exciting updates about the role!",
                    "When would be a good time for a quick call?",
                    "Hope you're having a great day! Any thoughts on our offer?"
                ];
                
                const message = getRandomResponse(newMessages);
                
                // Add unread badge to chat item if not muted
                const chatItem = document.querySelector(`[data-chat-id="${randomChat}"]`);
                if (chatItem && !chatItem.querySelector('.unread-badge') && !mutedChats.has(randomChat)) {
                    const meta = chatItem.querySelector('.chat-meta');
                    const unreadBadge = document.createElement('div');
                    unreadBadge.className = 'unread-badge';
                    unreadBadge.textContent = '1';
                    meta.appendChild(unreadBadge);
                }
                
                updateChatPreview(randomChat, message);
                
                // Show notification if not muted
                if (!mutedChats.has(randomChat)) {
                    showNotification(`New message from ${chatData[randomChat].name}`, 'info');
                }
            }
        }

        // Simulate status changes
        function simulateStatusChanges() {
            const statuses = ['Online', 'Away', 'Offline'];
            Object.keys(chatData).forEach(chatId => {
                if (Math.random() < 0.3) { // 30% chance of status change
                    const newStatus = getRandomResponse(statuses);
                    const chat = chatData[chatId];
                    chat.status = chat.status.replace(/Online|Away|Offline/g, newStatus);
                }
            });
        }

        // Enhanced input action functions
        function toggleEmojiPicker() {
            const emojis = ['ðŸ‘', 'ðŸ˜Š', 'ðŸŽ‰', 'ðŸ’ª', 'ðŸš€', 'â¤ï¸', 'ðŸ˜„', 'ðŸ‘', 'ðŸ”¥', 'ðŸ’¯'];
            const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];
            
            const messageInput = document.getElementById('messageInput');
            messageInput.value += randomEmoji;
            messageInput.focus();
            handleInputChange();
        }

        function startVoiceRecording() {
            showNotification('Voice recording started! ðŸŽ¤', 'info');
            
            // Simulate voice recording
            setTimeout(() => {
                showNotification('Voice message sent! ðŸŽµ', 'success');
                addMessage('sent', 'ðŸŽµ Voice message (0:15)');
                
                setTimeout(() => {
                    showTypingIndicator();
                    setTimeout(() => {
                        generateIntelligentResponse('voice message');
                    }, 2000);
                }, 1000);
            }, 3000);
        }

        function attachFile() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*,video/*,audio/*,.pdf,.doc,.docx,.txt';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const fileSize = (file.size / 1024 / 1024).toFixed(2);
                    const fileName = file.name;
                    
                    showNotification(`File "${fileName}" (${fileSize}MB) uploaded! ðŸ“Ž`, 'success');
                    addMessage('sent', `ðŸ“Ž ${fileName} (${fileSize}MB)`);
                    
                    setTimeout(() => {
                        showTypingIndicator();
                        setTimeout(() => {
                            addMessage('received', 'Thanks for sharing that! I\'ll review it and get back to you soon.');
                        }, 2000);
                    }, 1000);
                }
            };
            input.click();
        }

        // Call functions
        function initiateCall(type) {
            const chat = chatData[currentChat];
            const callType = type === 'voice' ? 'Voice' : 'Video';
            
            showNotification(`Initiating ${callType.toLowerCase()} call with ${chat.name}... ðŸ“ž`, 'info');
            
            setTimeout(() => {
                showNotification(`${callType} call feature will be available soon! ðŸš€`, 'info');
            }, 2000);
        }

        // Mobile functions
        function showChatSelection() {
            if (window.innerWidth <= 768) {
                openMobileSidebar();
            }
        }

        function openMobileSidebar() {
            document.getElementById('chatSidebar').classList.add('open');
            document.getElementById('mobileOverlay').classList.add('active');
        }

        function closeMobileSidebar() {
            document.getElementById('chatSidebar').classList.remove('open');
            document.getElementById('mobileOverlay').classList.remove('active');
        }

        // Handle window resize
        function handleWindowResize() {
            if (window.innerWidth > 768) {
                closeMobileSidebar();
            }
        }

        // Enhanced notification system
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type} show`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Auto remove after 4 seconds
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 400);
            }, 4000);
            
            // Remove on click
            notification.addEventListener('click', () => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 400);
            });
        }
    </script>
</body>
</html>
